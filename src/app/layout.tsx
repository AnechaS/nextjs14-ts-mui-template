import type { Metadata } from 'next';
import { AppRouterCacheProvider } from '@mui/material-nextjs/v14-appRouter';
import CssBaseline from '@mui/material/CssBaseline';
import { StyledEngineProvider, ThemeProvider } from '@mui/material/styles';
import axios from 'axios';
import messages from '@/common/messages';
import setupAxios from '@/common/setup-axios';
import LanguageProvider from '@/components/language-provider';
import StoreProvider from '@/components/store-provider';
import theme from '@/theme';
import './globals.css';

setupAxios(axios);

export const metadata: Metadata = {
  title: 'My App',
  description: 'Generated by create next app',
};

export default function RootLayout(props: Readonly<{ children: React.ReactNode }>) {
  return (
    <html lang="en">
      <body>
        <AppRouterCacheProvider options={{ enableCssLayer: true, key: 'css' }}>
          <StyledEngineProvider injectFirst>
            <ThemeProvider theme={theme}>
              {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}
              <CssBaseline />
              <StoreProvider>
                <LanguageProvider messages={messages}>
                  <main>{props.children}</main>
                </LanguageProvider>
              </StoreProvider>
            </ThemeProvider>
          </StyledEngineProvider>
        </AppRouterCacheProvider>
      </body>
    </html>
  );
}
